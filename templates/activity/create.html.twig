{% extends 'base.html.twig' %}

{% block title %}Créer une sortie{% endblock %}
{%  block h2 %}Créer une sortie{% endblock %}

{% block body %}


    {{ form_start(form) }}
        <div>
            {{ form_label(form.activityName) }}
            {{ form_widget(form.activityName) }}
            {{ form_errors(form.activityName) }}
        </div>

        <div>
            {{ form_label(form.startDate) }}
            {{ form_widget(form.startDate) }}
            {{ form_errors(form.startDate) }}
        </div>

        <div>
            {{ form_label(form.closingDate) }}
            {{ form_widget(form.closingDate) }}
            {{ form_errors(form.closingDate) }}
        </div>

        <div>
            {{ form_label(form.maxRegistration) }}
            {{ form_widget(form.maxRegistration) }}
            {{ form_errors(form.maxRegistration) }}
        </div>

        <div>
            {{ form_label(form.duration) }}
            {{ form_widget(form.duration) }}
            {{ form_errors(form.duration) }}
        </div>
        <div>
            {{ form_label(form.description) }}
            {{ form_widget(form.description) }}
            {{ form_errors(form.description) }}
        </div>

{#        <div>#}
{#            {{ form_label(form.pictureUrl) }}#}
{#            {{ form_widget(form.pictureUrl) }}#}
{#            {{ form_errors(form.pictureUrl) }}#}
{#        </div>#}

        <div>
            {{ form_label(form.site) }}
            {{ form_widget(form.site, {'attr': {'default': app.user.userProfile.site.id}})}}
            {{ form_errors(form.site) }}
        </div>

        <div>
            {{ form_label(form.city) }}
            {{ form_widget(form.city,{'attr': {'id': 'select-city'}}) }}
            {{ form_errors(form.city) }}
        </div>
        <div>
            {{ form_label(form.location) }}
            {{ form_widget(form.location,{'attr': {'id': 'select-location'}}) }}
            {{ form_errors(form.location) }}
            <a href="{{ path("activity_location_create")}}" class="btn btn-primary">+</a>
        </div>

        <div>
            <button type="submit" class="btn btn-success" name="btnActivity" value="add">Publier la sortie</button>
            <button type="submit" class="btn btn-info" name="btnActivity" value="save">Enregistrer comme brouillon</button>
            <a href="{{ path("activity_list") }}" class="btn btn-secondary">Abandonner</a>
            {% if activity.state is not null and activity.state.id == 1  %}
                <a href="{{ path("activity_delete",{'id': activity.id}) }}" onclick="deleteEvent(event)" class="btn btn-danger">Supprimer</a>
            {% endif %}

        </div>
    {{ form_end(form) }}



{#    TEST POUR METTRE A JOUR LES LIEUX EN FONCTION DE LA VILLE SELECTIONNEE #}
    <div class="maj-js" style="display:none;">
        {% for location in locations  %}
            <div class="dyn-locations">
                <p class="dyn-location-city-name">{{ location.city.cityName }}</p>
                <p class="dyn-location-name">{{ location.locationName }}</p>
            </div>
        {% endfor %}
    </div>

{#    <script>#}
{#        // window.onload = init;#}
{#        let locations = document.getElementsByClassName("dyn-locations");#}
{#        console.log(locations);#}
{#        for (index = 0; index<locations.length;index++){#}
{#            console.log(locations[index]);#}
{#        }#}

{#    </script>#}


{% endblock %}

